diff --git a/dist/index.js b/dist/index.js
index 4ba7afcaa6236663bc13fc8a459f04dea7ac36aa..72a23dd44f1b27d0eed95d72504e6514a55e93c8 100644
--- a/dist/index.js
+++ b/dist/index.js
@@ -8,6 +8,9 @@ import { join, dirname } from 'path';
 import { z } from 'zod';
 import { parseProviderOptions, generateId } from '@ai-sdk/provider-utils';
 
+// Windows platform detection for shell mode
+var _isWindows = process.platform === "win32";
+
 // src/codex-cli-provider.ts
 
 // src/logger.ts
@@ -1004,7 +1007,7 @@ var CodexCliLanguageModel = class {
     let usage = createEmptyCodexUsage();
     const finishReason = mapCodexCliFinishReason(void 0);
     const startTime = Date.now();
-    const child = spawn(cmd, args, { env, cwd, stdio: ["pipe", "pipe", "pipe"] });
+    const child = spawn(cmd, args, { env, cwd, stdio: ["pipe", "pipe", "pipe"], shell: _isWindows });
     child.stdin.write(promptText);
     child.stdin.end();
     let onAbort;
@@ -1171,7 +1174,7 @@ var CodexCliLanguageModel = class {
     const stream = new ReadableStream({
       start: (controller) => {
         const startTime = Date.now();
-        const child = spawn(cmd, args, { env, cwd, stdio: ["pipe", "pipe", "pipe"] });
+        const child = spawn(cmd, args, { env, cwd, stdio: ["pipe", "pipe", "pipe"], shell: _isWindows });
         child.stdin.write(promptText);
         child.stdin.end();
         controller.enqueue({ type: "stream-start", warnings });
